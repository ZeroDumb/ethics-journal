---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import MatrixRain from '../components/MatrixRain.tsx';
import type { ContentEntryMap } from 'astro:content';

const posts = await getCollection('blog');
const tools = await getCollection('tools');
const labs = await getCollection('labs');
const sevenSisters = await getCollection('7-sisters');
const happyFrog = await getCollection('happy-frog');
const helperNotes = await getCollection('helper-notes');

posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
tools.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
labs.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
sevenSisters.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
happyFrog.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
helperNotes.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="ZeroDumb Hacking Journal">
  <MatrixRain client:only="react" />
  <div class="relative">
    <div class="terminal-container bg-gray-900 rounded-lg border border-gray-700 overflow-hidden mb-4 sm:mb-8">
      <div class="terminal-header bg-gray-800 px-3 sm:px-4 py-2 flex justify-between items-center">
      <div class="flex space-x-1">
        <span class="text-terminal-green font-mono">zerodumb</span>
      </div>
    
      <div class="flex space-x-2">
        <span class="w-3 h-3 rounded-full bg-red-500"></span>
        <span class="w-3 h-3 rounded-full bg-yellow-500"></span>
        <span class="w-3 h-3 rounded-full bg-green-500"></span>
      </div>
    </div>

    <div class="terminal-body p-4 font-mono">
      <p class="mb-4">
        <span class="text-terminal-green">MmaddHatter13@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$ whoami</span><br>
        <span class="text-gray-300">MmaddHatter13</span><br>
    
        <span class="text-terminal-green">MmaddHatter13@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$ sudo su</span><br>
        <span class="text-gray-400">[sudo] password for MmaddHatter13: ********</span><br>
    
        <span class="text-red-500">root@</span><span class="text-[#2323ff]">hacking-journal:</span><span class="text-terminal-green">/home/MmaddHatter13# whoami</span><br>
        <span class="text-gray-300">root</span><br>
    
        <span class="text-red-500">root@</span><span class="text-[#2323ff]">hacking-journal:</span><span class="text-terminal-green">/home/MmaddHatter13# cat /etc/shadow</span><br>
        <span class="text-gray-300">cat: /etc/shadow: Permission denied</span><br>
    
        <span class="text-red-500">root@</span><span class="text-[#2323ff]">hacking-journal:</span><span class="text-terminal-green">/home/MmaddHatter13# su zerodumb</span><br>
        <span class="text-gray-400">Password: ********</span><br>
    
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$ whoami</span><br>
        <span class="text-gray-300">zerodumb</span><br>
      </p>

      <!-- Welcome Message -->
      <p class="mb-4">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$ cat</span> <span class="text-gray-300">welcome.txt</span>
      </p>

      <div class="text-gray-300 mb-6">
        Welcome to ZeroDumb Hacking Journal<br><br>
        Exploring the frontier of ethical hacking, recon, AI chaos, occasional dumpster fires, security adventures and digital responsibility. One post at a time.
      </div>

      <!-- Start Here - Pinned Origin Story -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$ cat</span> <span class="text-gray-300">Origin.md</span>
      </p>
      <div class="text-gray-300 mb-6 border-l-2 border-terminal-green pl-4 bg-gray-800/50 p-4 rounded">
        <h3 class="text-terminal-green font-bold mb-2">START HERE: The Origin Story</h3>
        <p class="mb-3">
          <strong>Mission:</strong> Don't be dumb, don't be a skid, make a positive impact.
        </p>
        <p class="mb-3">
          <strong>Why I'm Here:</strong> As AI tools become ubiquitous and people use them without understanding the security implications, 
          I'm learning to become a full-blown red teaming, limit-pushing, research-generating, reverse engineering, 
          access and evasion expert (insert evil movie laugh here), but seriously, kinda.
        </p>
        <p class="mb-3">
          <strong>Core Belief:</strong> If I'm going to be forced to accept AI tools, I'm going to be an expert at exploiting them 
          to help improve, protect, and understand the data and our future.
        </p>
        <div class="mt-4">
          <a href="/blog/origin/" class="text-terminal-cyan hover:underline font-bold">READ FULL ORIGIN STORY â†’</a>
        </div>
      </div>

      <div class="text-gray-300 mb-6">
        <strong class="text-terminal-green mb-4 mt-6 hover:underline">Disclaimer:</strong><br>
        - This is a personal journal. I'm not a professional writer, and I'm not a professional hacker. I'm just a guy who is trying to learn, hack, and write about it.<br>
        - I make lots of mistakes. I try to openly share them.<br>
        - Finding communities where genuine people share anything, outside of hacking their toaster, is hard.<br>
        - So I just started where I thought was best, and decided to document my journey.<br>
        - You may see this and cringe. That's ok. I will improve my writing and skills as I go.<br><br>
        If you want to see my work, you can find it on my <strong><a href="https://github.com/zerodumb" class="text-terminal-cyan hover:underline">GitHub</a></strong> or linked throughout my posts.
      </div>

      <!-- Store folder -->
<!--      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-gray-500">$</span> ls -l Gadgets-Gizmos-Wheregoes-Whatreads-Thingamabobs/
      </p>
      <div class="prose prose-invert max-w-none">
        <h2 class="text-terminal-green">Available Products</h2>
        <p>Check out our collection of security tools and automation gadgets.</p>
        <a href="/shop" class="inline-block mt-4 px-4 py-2 bg-green-700 hover:bg-green-500 text-white rounded">
          Browse Products
        </a>
      </div> -->

      <!-- Helper Notes folder -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> ls -l helper-notes/
      </p>
      <div class="text-gray-300 space-y-2">
        {helperNotes.slice(0, 4).map(note => (
          <p>-rw-r--r-- 1 zero zero 4096 {note.data.pubDate.toLocaleDateString('en-US')} <a href={`/helper-notes/${note.slug}`} class="text-terminal-cyan hover:underline">{note.slug}.md</a></p>
        ))}
        {helperNotes.length > 4 && (
          <div class="hidden space-y-2" id="helper-notes-all">
            {helperNotes.slice(4).map(note => (
              <p>-rw-r--r-- 1 zero zero 4096 {note.data.pubDate.toLocaleDateString('en-US')} <a href={`/helper-notes/${note.slug}`} class="text-terminal-cyan hover:underline">{note.slug}.md</a></p>
            ))}
          </div>
        )}
        {helperNotes.length > 4 && (
          <button onclick="toggleSection('helper-notes-all', 'helper-notes-btn')" id="helper-notes-btn" class="text-terminal-green hover:text-terminal-cyan cursor-pointer text-sm">
            View All ({helperNotes.length} total)
          </button>
        )}
      </div>

      <!-- Labs folder -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> ls -l labs/WIP
      </p>
      <div class="text-gray-300 space-y-2">
        {labs.slice(0, 4).map(lab => (
          <p>-rw-r--r-- 1 zero zero 4096 {lab.data.pubDate.toLocaleDateString('en-US')} <a href={`/labs/${lab.slug}`} class="text-terminal-cyan hover:underline">{lab.slug}.md</a></p>
        ))}
        {labs.length > 4 && (
          <div class="hidden space-y-2" id="labs-all">
            {labs.slice(4).map(lab => (
              <p>-rw-r--r-- 1 zero zero 4096 {lab.data.pubDate.toLocaleDateString('en-US')} <a href={`/labs/${lab.slug}`} class="text-terminal-cyan hover:underline">{lab.slug}.md</a></p>
            ))}
          </div>
        )}
        {labs.length > 4 && (
          <button onclick="toggleSection('labs-all', 'labs-btn')" id="labs-btn" class="text-terminal-green hover:text-terminal-cyan cursor-pointer text-sm">
            View All ({labs.length} total)
          </button>
        )}
      </div>

      <!-- Tools folder -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> ls -l tools/
      </p>
      <div class="text-gray-300 space-y-2">
        {tools.slice(0, 4).map(tool => (
          <p>-rw-r--r-- 1 zero zero 4096 {tool.data.pubDate.toLocaleDateString('en-US')} <a href={`/tools/${tool.slug}`} class="text-terminal-cyan hover:underline">{tool.slug}.md</a></p>
        ))}
        {tools.length > 4 && (
          <div class="hidden space-y-2" id="tools-all">
            {tools.slice(4).map(tool => (
              <p>-rw-r--r-- 1 zero zero 4096 {tool.data.pubDate.toLocaleDateString('en-US')} <a href={`/tools/${tool.slug}`} class="text-terminal-cyan hover:underline">{tool.slug}.md</a></p>
            ))}
          </div>
        )}
        {tools.length > 4 && (
          <button onclick="toggleSection('tools-all', 'tools-btn')" id="tools-btn" class="text-terminal-green hover:text-terminal-cyan cursor-pointer text-sm">
            View All ({tools.length} total)
          </button>
        )}
      </div>

      <!-- 7-sisters folder -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> ls -l 7-sisters/mischief_managed/
      </p>
      <div class="text-gray-300 space-y-2">
        {sevenSisters.slice(0, 4).map(sister => (
          <p>-rw-r--r-- 1 zero zero 4096 {sister.data.pubDate.toLocaleDateString('en-US')} <a href={`/7-sisters/${sister.slug}`} class="text-terminal-cyan hover:underline">{sister.slug}.md</a></p>
        ))}
        {sevenSisters.length > 4 && (
          <div class="hidden space-y-2" id="seven-sisters-all">
            {sevenSisters.slice(4).map(sister => (
              <p>-rw-r--r-- 1 zero zero 4096 {sister.data.pubDate.toLocaleDateString('en-US')} <a href={`/7-sisters/${sister.slug}`} class="text-terminal-cyan hover:underline">{sister.slug}.md</a></p>
            ))}
          </div>
        )}
        {sevenSisters.length > 4 && (
          <button onclick="toggleSection('seven-sisters-all', 'seven-sisters-btn')" id="seven-sisters-btn" class="text-terminal-green hover:text-terminal-cyan cursor-pointer text-sm">
            View All ({sevenSisters.length} total)
          </button>
        )}
      </div>

      <!-- happy-frog folder -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> ls -l happy-frog/HID
      </p>
      <div class="text-gray-300 space-y-2">
        {happyFrog.slice(0, 4).map(frogs => (
          <p>-rw-r--r-- 1 zero zero 4096 {frogs.data.pubDate.toLocaleDateString('en-US')} <a href={`/happy-frog/${frogs.slug}`} class="text-terminal-cyan hover:underline">{frogs.slug}.md</a></p>
        ))}
        {happyFrog.length > 4 && (
          <div class="hidden space-y-2" id="happy-frog-all">
            {happyFrog.slice(4).map(frogs => (
              <p>-rw-r--r-- 1 zero zero 4096 {frogs.data.pubDate.toLocaleDateString('en-US')} <a href={`/happy-frog/${frogs.slug}`} class="text-terminal-cyan hover:underline">{frogs.slug}.md</a></p>
            ))}
          </div>
        )}
        {happyFrog.length > 4 && (
          <button onclick="toggleSection('happy-frog-all', 'happy-frog-btn')" id="happy-frog-btn" class="text-terminal-green hover:text-terminal-cyan cursor-pointer text-sm">
            View All ({happyFrog.length} total)
          </button>
        )}
      </div>

      <!-- Blog posts folder -->
      <p class="text-terminal-green mb-4 mt-6">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> ls -l posts/
      </p>
      <div class="text-gray-300 space-y-2">
        {posts.slice(0, 4).map(post => (
          <p>-rw-r--r-- 1 zero zero 4096 {post.data.pubDate.toLocaleDateString('en-US')} <a href={`/blog/${post.slug}`} class="text-terminal-cyan hover:underline">{post.slug}.md</a></p>
        ))}
        {posts.length > 4 && (
          <div class="hidden space-y-2" id="posts-all">
            {posts.slice(4).map(post => (
              <p>-rw-r--r-- 1 zero zero 4096 {post.data.pubDate.toLocaleDateString('en-US')} <a href={`/blog/${post.slug}`} class="text-terminal-cyan hover:underline">{post.slug}.md</a></p>
            ))}
          </div>
        )}
        {posts.length > 4 && (
          <button onclick="toggleSection('posts-all', 'posts-btn')" id="posts-btn" class="text-terminal-green hover:text-terminal-cyan cursor-pointer text-sm">
            View All ({posts.length} total)
          </button>
        )}
      </div>

      <p class="text-terminal-green mt-6 animate-pulse">
        <span class="text-terminal-green">zerodumb@</span><span class="text-[#2323ff]">hacking-journal:</span> <span class="text-terminal-green">~$</span> alias ls='rm -rf /'
      </p>
    </div>

  </div>

  <script is:inline>
    function toggleSection(sectionId, buttonId) {
      const section = document.getElementById(sectionId);
      const button = document.getElementById(buttonId);
      
      if (!section || !button) return;
      
      if (section.classList.contains('hidden')) {
        section.classList.remove('hidden');
        if (button.textContent) {
          button.textContent = button.textContent.replace('View All', 'Show Less');
        }
      } else {
        section.classList.add('hidden');
        if (button.textContent) {
          button.textContent = button.textContent.replace('Show Less', 'View All');
        }
      }
    }
  </script>

</Layout>
